name: '🤖 Ultimate Content & Log Bot'

on:
  schedule:
    - cron: '0 */6 * * *'
  
  workflow_dispatch:

jobs:
  create-log-file:
    runs-on: ubuntu-latest
    steps:
      - name: 'Step 1: Checkout Repository'
        uses: actions/checkout@v4

      - name: 'Step 2: Generate Professional Log Content'
        env:
          TZ: 'Asia/Kolkata'
        run: |
          FOLDER_NAME="AutoLogs_$(date +'%Y-%m-%d')"
          FILE_NAME="log_$(date +'%H-%M-%S').md"
          FULL_PATH="$FOLDER_NAME/$FILE_NAME"
          README_PATH="$FOLDER_NAME/README.md"

          mkdir -p $FOLDER_NAME

          if [ ! -f "$README_PATH" ]; then
            {
              echo "## 📂 Log Summary: $(date +'%B %d, %Y')"
              echo "> This folder contains all automated logs generated on this date."
              echo ""
              echo "| Category      | Details                     |"
              echo "|---------------|-----------------------------|"
              echo "| 🗓️ **Date** | $(date +'%Y-%m-%d')          |"
              echo "| 🇮🇳 **Timezone** | India Standard Time (IST)   |"
              echo "| 🤖 **Bot Name** | Ultimate Content Bot        |"
              echo ""
            } > $README_PATH
          fi

          {
            echo "## 🤖 Automated Log Entry"
            echo "> This log was auto-generated by a GitHub Actions workflow."
            echo ""
            echo "### 📊 Run Details"
            echo "| Detail          | Information                                    |"
            echo "|:----------------|:-----------------------------------------------|"
            echo "| 🗓️ **Date** | **$(date +'%Y-%m-%d')** |"
            echo "| ⏰ **Time** | **$(date +'%H:%M:%S %Z')** |"
            echo "| 📂 **File Path** | \`$FULL_PATH\`                                 |"
            echo "| 🚀 **Run ID** | \`${{ github.run_id }}\`                          |"
            echo "| 👤 **Triggered By**| **${{ github.actor }}** |"
            echo ""
            echo "<details>"
            echo "<summary>⚙️ View Technical Details (Click to expand)</summary>"
            echo ""
            echo "\`\`\`json"
            echo "${{ toJSON(github) }}"
            echo "\`\`\`"
            echo "</details>"
            echo ""
            echo "---"
            echo "*This is an automated process.*"
          } > $FULL_PATH

      - name: 'Step 3: Commit and Push to Repository'
        run: |
          git config --global user.name "github-actions[bot]"
          git config --global user.email "github-actions[bot]@users.noreply.github.com"
          git add .
          git commit -m "feat(bot): ✨ Generate rich log file" -a || echo "No changes to commit"
          git push





